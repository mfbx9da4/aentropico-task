<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width" name="viewport">
<meta content="yes" name="apple-mobile-web-app-capable">

<title>Practical End-to-End Testing with Protractor | ng-newsletter</title>

<meta name="author" content="Ari Lerner">
<meta name="description" content="In this week's post, we dive deep into testing with Protractor, the next-gen testing framework in Angular. Learn how to use Protractor in your app with step-by-step guide into ours. angularjs angularjs tutorial angular">
<meta name="keywords" content="angularjs getting started with angularjs testing testing angularjs testing with protractor protractor testing angular test protractor angular tutorial angularjs tutorial angularjs angularjs tutorial angular realtime firebase angularfire">

<meta name="msvalidate.01" content="BE7DA3BEF0F11153F6E4B5585C12DB20" />
<meta property="og:type" content="website" />
<meta property="og:title" content="ng-newsletter" />
<meta property="og:url" content="http://ng-newsletter.com" />
<meta property="og:image" content="http://ng-newsletter.com/img/" />
<meta property="og:description" content="In this week's post, we dive deep into testing with Protractor, the next-gen testing framework in Angular. Learn how to use Protractor in your app with step-by-step guide into ours." />

<meta name="twitter:card" value="summary" />
<meta name="twitter:creator" value="@auser" />
<meta name="twitter:title" value="ng-newsletter" />
<meta name="twitter:description" value="In this week's post, we dive deep into testing with Protractor, the next-gen testing framework in Angular. Learn how to use Protractor in your app with step-by-step guide into ours." />
<meta name="twitter:image" value="http://ng-newsletter.com/img/" />

<link rel="alternate" type="application/rss+xml" href="feed.rss" title="Sitewide RSS 2.0 Feed">
<link rel="alternate" type="application/atom+xml" href="atom.xml" title="Sitewide ATOM Feed">
<link rel="alternate" type="application/atom+json" href="atom.json" title="Sitewide JSON Feed">

<link href="/favicon.ico" rel="icon" type="image/ico" />
<link href="/css/site.css" media="screen" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Roboto:400italic,700italic,400,700|Open+Sans:r,i,b,bi|Bitter:r,i,b" media="screen" rel="stylesheet" type="text/css" />
<script src="/js/vendor/custom.modernizr.js"></script>
<script src="/js/vendor/d3.v3.min.js"></script>
<script src="/js/vendor/angular/angular.min.js"></script>
<script src="/js/vendor/angular-route/angular-route.min.js"></script>
<script src="/js/vendor/angular-animate.min.js"></script>
<script src="/js/vendor/angular-translate.min.js"></script>
<script src="/js/vendor/angular-cookies/angular-cookies.min.js"></script>


</head>
<body>

    
    <div id="header">
  <div id="topNav">
    <nav class="top-bar">
      <ul class="title-area">
        <li class="name">
          <h1><a href="/">ng-newsletter</a></h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
      </ul>

      <section class="top-bar-section">
        <ul class="right">
      		<li><a href="/posts">Articles</a></li>
          <li><a href="/advent2013/">25 days of Angular</a></li>
          <li><a href="/books">Books</a></li>
          <li><a href="/sponsor">Sponsorship</a></li>
        </ul>
      </section>
    </nav>
  </div>
  <div class="headerContent">
  </div>
</div>

    <div class="container">
      <div id="article">
        <article class="post">
          <header>
            <h1 class="mega">Practical End-to-End Testing with Protractor</h1>
          </header>
          
          <p>One of the reasons AngularJS is so great to work with is that it was developed around the idea that testing is so important that it should be built into the framework. Every check-in of the Angular source is tested before it&rsquo;s accepted into the core.</p>

<p>Testing is incredibly important, especially in a dynamically typed environment like JavaScript. It gives us the opportunity to catch errors before they happen in production. Testing code allows us to be confident about the production value of our code. </p>

<p>As bugs in our code, or any code, are inevitable, it&rsquo;s important for us to be able to determine where they are and try to eliminate them before they show up in production. Using testing, we can isolate these pieces of functionality in a test environment where we can understand our app from the inside out.</p>

<p><strong>Testing is essential if we are to understand what is happening in our app.</strong></p>

<p>In this article, we&rsquo;re examining how to test our application using end-to-end testing. End-to-end testing is black box testing. We are testing that the system works as planned from an end user&rsquo;s perspective. </p>

<p>An end user doesn&rsquo;t care if a service works as planned; he or she cares that the functionality of our app works as expected. We can think of it as a way to automate starting the app in our browser and clicking through the workflow of the application. </p>

<p>It would be inefficient for us to click through the application manually, so we&rsquo;ll script our tests to happen automatically.</p>

<h3>Protractor</h3>

<p>The <em>new</em>, preferred end-to-end testing framework is called Protractor. Unlike the Angular scenario runner, Protractor is built on Selenium&rsquo;s <a href="https://code.google.com/p/selenium/wiki/WebDriverJs">WebDriver</a>, which is an API, written as extensions, for controlling browsers.</p>

<p>WebDriver has extensions for all sorts of different browsers, including the most popular. We gain speed and stability in our tests by developing against true web browsers.</p>

<p>Luckily, Protractor is built atop the Jasmine framework, so we don&rsquo;t need to learn a new framework in order to use it. We can also install it as a standalone test runner or embed it in our tests as a library.</p>

<h3>Installation</h3>

<p>Unlike the Angular scenario runner, Protractor requires a separate standalone server to be running at <code>http://location:4444</code> (we can configure this location).</p>

<p>Luckily, Protractor itself comes with a tool that eases the installation of a Selenium server. </p>

<p>In order to access the script, we&rsquo;ll need to install Protractor locally in the top-level directory of the Angular app we want to test.</p>
<pre class="highlight text">$ npm install protractor
</pre>
<p>Then we can run the Selenium installation script, located in the local <code>node_modules/</code> directory:</p>
<pre class="highlight shell"><span class="gp">$ </span>./node_modules/protractor/bin/webdriver-manager update
</pre>
<p>This script downloads the files required to run Selenium itself and build a start script and a directory with them.</p>

<p>When this script is finished, we can start the standalone version of Selenium with the Chrome driver by executing the start script:</p>
<pre class="highlight shell"><span class="gp">$ </span>./node_modules/protractor/bin/webdriver-manager start
</pre>
<blockquote>
<p>If you are having trouble running your Selenium installation, try updating the ChromeDriver by downloading the latest version <a href="http://chromedriver.storage.googleapis.com/">here</a>.</p>
</blockquote>

<p>Now we can use Protractor to connect to our Selenium server, which is running in the background.</p>

<h3>Configuration</h3>

<p>Like Karma, Protractor itself requires a configuration script that tells Protractor how to run, how to connect to Selenium, etc. </p>

<p>The <em>easiest</em> method for creating a configuration file for Protractor is to copy a reference configuration file from the installation directory.</p>
<pre class="highlight shell"><span class="gp">$ </span>cp ./node_modules/protractor/example/chromeOnlyConf.js protractor_conf.js
</pre>
<p>In order to get Protractor running, we need to make a few modifications to the script. First, the default configuration script uses a Chrome driver that doesn&rsquo;t exist in our current directory. Instead, we need to point it to the ChromeDriver in the local <code>./node_modules</code>.</p>
<pre class="highlight javascript"><span class="nx">chromeDriver</span><span class="err">:</span> <span class="s1">'./node_modules/protractor/selenium/chromedriver'</span><span class="p">,</span>
</pre>
<p>Next, we need to point the specs array to our local tests.</p>
<pre class="highlight javascript"><span class="nx">specs</span><span class="err">:</span> <span class="p">[</span><span class="s1">'test/e2e/**/*_spec.js'</span><span class="p">],</span>
</pre>
<p>There are quite a few options for setting up our tests using Protractor. Although we&rsquo;ll cover a few here, keep in mind that we have a lot of options in configuring Protractor.</p>

<p>We have <strong>two</strong> options for running Protractor tests, the first of which is to use Protractor to start Selenium when we run our Protractor tests. This option is called <em>standalone</em> mode. The example Protractor configuration file that we copied includes this setup. </p>
<pre class="highlight javascript"><span class="nx">chromeOnly</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="nx">chromeDriver</span><span class="err">:</span> <span class="s1">'./node_modules/protractor/selenium/chromedriver'</span><span class="p">,</span>
</pre>
<p>The second method for running Protractor tests is to connect to a separately running Selenium server. When our tests start to grow more complex, we&rsquo;ll likely want to run our tests using a separate Selenium server. </p>

<p>To configure Protractor to use this separate server, we need to delete the previous two options (<code>chromeOnly</code> and <code>chromeDriver</code>) and add the <code>seleniumAddress</code> option that points to the running Selenium server.</p>
<pre class="highlight javascript"><span class="nx">seleniumAddress</span><span class="err">:</span> <span class="s1">'http://0.0.0.0:4444/wd/hub'</span><span class="p">,</span>
</pre>
<h3>Testing</h3>

<p>When we start testing with Protractor, we set up our tests to work through Jasmine. That is, we simply start writing our tests like we do when we write our Karma tests. For instance, a simple Protractor test setup might look like:</p>
<pre class="highlight javascript"><span class="nx">describe</span><span class="p">(</span><span class="s1">'homepage'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// before function
</span>  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should load the page'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// test goes here
</span>    <span class="nx">expect</span><span class="p">(...).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
<p>Although the content of the tests above isn&rsquo;t complete, the structure is familiar: It&rsquo;s set up using Jasmine. We get to use the <code>beforeEach()</code> and <code>afterEach()</code> functions as well as nested <code>describe()</code> blocks for the structure around our tests. </p>

<p>To actually implement tests, we&rsquo;ll use the same <code>expect()</code> syntax that Jasmine gives us.</p>

<p>Writing tests for Protractor requires us to work with a few global variables that Protractor exposes to us in our tests. The following is a list of a few of those global variables:</p>

<h4>browser</h4>

<p>The <code>browser</code> variable is a wrapper around the WebDriver instance. We use the <code>browser</code> variable for any navigation or for grabbing any information off the page.</p>

<p>We can use the <code>browser</code> variable to navigate to a page using the <code>get()</code> function:</p>
<pre class="highlight javascript"><span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">browser</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'http://127.0.0.1:9000/'</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<p>We can run some neat tricks with the <code>browser</code> object. For instance, we can debug the page using the <code>debugger()</code> method on the <code>browser</code> object:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'should find title element'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">browser</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'app/index.html'</span><span class="p">);</span>

  <span class="nx">browser</span><span class="p">.</span><span class="kr">debugger</span><span class="p">();</span>

  <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">binding</span><span class="p">(</span><span class="s1">'user.name'</span><span class="p">));</span>
<span class="p">});</span>
</pre>
<p>To kick this test off with the node debugger, we can run the test in debug mode:</p>
<pre class="highlight javascript"><span class="nx">$</span> <span class="nx">protractor</span> <span class="nx">debug</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">js</span>
</pre>
<p>We get benefits when we run Protractor in debug mode: The execution halts in the browser, and every client-side script provided by Protractor is available in the console.</p>

<p>To get access to the Protractor client-side scripts, we can call them with the <code>window.clientSideScripts</code> object that&rsquo;s inserted by Protractor.</p>

<h2>Let&rsquo;s Test!</h2>

<p>Although it&rsquo;s easy to talk about how to use Protractor, it&rsquo;s not always clear how to get it going. As we always try to share the highest-quality material available on Angular, we&rsquo;re going to dive right into testing an application and strategies.</p>

<h3>Our Application</h3>

<p>Let&rsquo;s suppose we have an application that provides an alternative view for viewing <a href="https://github.com/">GitHub</a> issues. The simple app itself has only a few major features:</p>

<ul>
<li>It allows the user to input a repo owner and URL through an input box</li>
<li>It has a main page and an about page</li>
<li>It lists the issues, one by one, with a user&rsquo;s Gravatar</li>
</ul>

<p>The final app we&rsquo;re building looks like this:</p>

<p><img src="/images/protractor/home.png" />
<img src="/images/protractor/final-app.png" /></p>

<p>With any application, we can strategize about the tests that we want to write. We may end up writing a hundred tests for an incredibly simple app OR we might end up writing very few. Finding the right balance between the two will give us an advantage when it comes time to implement both the application and the tests.</p>

<h3>Strategy for Testing</h3>

<p>We&rsquo;ve found that the best balance between writing tests and writing code pretty much exists in knowing <strong>what</strong> to test just as much as how to test. Whenever we&rsquo;re writing tests for our code, we want to be writing tests that <strong>specifically</strong> address the behavior we are implementing. That is, we don&rsquo;t need to write a test to make sure an <code>&lt;h1&gt;</code> tag&rsquo;s content changes as we type into an <code>&lt;input&gt;</code> field. We do need to test our custom filtering for live search, for instance.</p>

<p>We&rsquo;ve found that writing our tests ahead of time when prototyping never works out in our favor. When we&rsquo;re in the prototyping phase, we&rsquo;ll write very few tests, if any at all, as we&rsquo;re still working through features of our application. When the application starts to grow, however, writing tests is always a good idea to ensure that the app behaves as we expect it to behave in production.</p>

<p>Finally, we&rsquo;ll want to set up our tests such that each block tests as little as possible. Ideally, each test block should contain no more than <strong>1</strong> expectation.</p>

<p>Enough theory, let&rsquo;s apply some strategy to testing our app.</p>

<p>We&rsquo;ll want to test that our page updates with the title of the new repo against which we&rsquo;re testing. The Angular app employs a custom service that makes an <code>$http</code> request to <code>github.com</code>. This request comes back, and we fill the rest of the front page.</p>

<p>Second, we&rsquo;ll want to test that the page navigation and content change. This test will involve us pressing the navigation buttons in our view to prompt a <code>$location</code> change.</p>

<p>Let&rsquo;s get started!</p>

<h2>Setting Up Our First Tests</h2>

<p>Our Protractor configuration file is pretty simple and nearly unmodified from the example configuration that comes with Protractor itself:</p>
<pre class="highlight javascript"><span class="c1">// An example configuration file.
</span><span class="nx">exports</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">seleniumAddress</span><span class="p">:</span> <span class="s1">'http://0.0.0.0:4444/wd/hub'</span><span class="p">,</span>
  <span class="na">capabilities</span><span class="p">:</span> <span class="p">{</span> <span class="s1">'browserName'</span><span class="err">:</span> <span class="s1">'chrome'</span> <span class="p">},</span>
  <span class="na">specs</span><span class="p">:</span> <span class="p">[</span><span class="s1">'test/e2e/**/*.spec.js'</span><span class="p">],</span>
  <span class="na">jasmineNodeOpts</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">showColors</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">defaultTimeoutInterval</span><span class="p">:</span> <span class="mi">30000</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre>
<p>We&rsquo;ll be writing our Protractor tests in the <code>test/e2e</code> directory, as we specified in our configuration file with the naming convention of <code>[name].spec.js</code>. Let&rsquo;s create our first test in the <code>test/e2e</code> directory called <code>main.spec.js</code>. </p>

<p>As Protractor tests are simply Jasmine tests, we&rsquo;ll start out with a simple Jasmine stub:</p>
<pre class="highlight javascript"><span class="c1">// in test/e2e/main.spec.js
</span><span class="nx">describe</span><span class="p">(</span><span class="s1">'E2E: main page'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Our tests go in here
</span><span class="p">});</span>
</pre>
<p>Given that we&rsquo;re writing our tests with Jasmine, we can use our <code>beforeEach()</code> block to set them up. We also need to keep track of the Protractor instance, so let&rsquo;s set up a variable we&rsquo;ll call <code>ptor</code> that will hold on to it. For every single one of these tests, we&rsquo;ll use the <code>browser</code> object to navigate to the home page.</p>

<blockquote>
<p>As with end-to-end tests, we need to have a server running against which our end-to-end tests run.</p>
</blockquote>
<pre class="highlight javascript"><span class="nx">describe</span><span class="p">(</span><span class="s1">'E2E: main page'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ptor</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">browser</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'http://127.0.0.1:9000/'</span><span class="p">);</span>
    <span class="nx">ptor</span> <span class="o">=</span> <span class="nx">protractor</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
  <span class="p">});</span>

<span class="p">});</span>
</pre>
<p>Instead of pointing our tests to the full URL every time we want to test a page, we can set the <code>baseUrl</code> in our Protractor configuration file. For the rest of the section, we&rsquo;ll assume that we have the option set in our config file like so:</p>
<pre class="highlight javascript"><span class="nx">baseUrl</span><span class="err">:</span> <span class="s1">'http://127.0.0.1:9000/'</span><span class="p">,</span>
</pre>
<p>Our first test will simply test that the main page loads up: We can test that an element exists on the page. Since our home page contains the ID <code>#home</code>, we can write an <em>expectation</em> to guarantee the condition.</p>

<p>We&rsquo;ll first find the element we&rsquo;re interested in using the <code>by.id()</code> function to target the <code>&lt;div&gt;</code> with the <code>#main</code> ID:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'should load the home page'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ele</span> <span class="o">=</span> <span class="nx">by</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<p>Once we have the element, we can set an expectation that the element is present on the page using the Protractor instance&rsquo;s method <code>isElementPresent()</code>:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'should load the home page'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ele</span> <span class="o">=</span> <span class="nx">by</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">ptor</span><span class="p">.</span><span class="nx">isElementPresent</span><span class="p">(</span><span class="nx">ele</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<p>To run our tests, we need to launch a Selenium server. Luckily, Protractor makes this process easy using a built-in tool called <code>webdriver-manager</code>. This manager is included by default (as we saw above). Let&rsquo;s start our <code>webdriver-manager</code>:</p>
<pre class="highlight shell"><span class="gp">$ </span>./node_modules/protractor/bin/webdriver-manager start
</pre>
<p>In a new shell, we&rsquo;ll need to launch Protractor to actually run our tests. The <code>protractor</code> binary takes a single argument: the configuration file:</p>
<pre class="highlight shell"><span class="gp">$ </span>./node_modules/protractor/bin/protractor protractor_conf.js
</pre>
<p><img src="/images/protractor/running_first_test.png" /></p>

<h2>Testing the Input Box</h2>

<p>First, we&rsquo;re setting our sights on testing the input box. The main page loads a single form with a single input box that is only shown if the user has not yet picked a repo in which to search issues. The <code>&lt;input type=&quot;text&quot;&gt;</code> is bound to a model called <code>repoName</code>. Once the user has submitted the form, then the form itself disappears and the list of issues appears instead.</p>

<p><img src="/images/protractor/home.png" /></p>

<p>The HTML looks like:</p>
<pre class="highlight html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;repoform&quot;</span> <span class="na">class=</span><span class="s">&quot;main&quot;</span> <span class="na">ng-if=</span><span class="s">&quot;!repoName&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">ng-submit=</span><span class="s">&quot;getIssues()&quot;</span> <span class="na">class=</span><span class="s">&quot;input-group&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;input-group&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">'repo.name'</span> <span class="na">placeholder=</span><span class="s">'Enter repo name'</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;input-group-btn&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre>
<p>The functionality that we&rsquo;re interested in testing is that the form disappears and the listing appears. In a new test, we&rsquo;ll want to target the <code>&lt;input&gt;</code> element and write into it. We can do so with the <code>sendKeys()</code> method on our targeted element. To target our <code>&lt;input&gt;</code> element, we can use the <code>by.input()</code> method that gives us access to find input elements containing a binding with <code>ng-model</code>.</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'the input box should go away on submit'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'repo.name'</span><span class="p">)).</span><span class="nx">sendKeys</span><span class="p">(</span><span class="s1">'angular/angular.js\n'</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<p>When we run this test, we&rsquo;ll see that the <code>&lt;input&gt;</code> field is filled out. There will be no expectations set up as we haven&rsquo;t yet written one, but we can see the input filling up with <code>angular/angular.js</code>.</p>

<p>To make our input field disappear, we need to submit the form. The easiest way to submit a form is by faking pressing the enter button. In the above <code>sendKeys()</code>, we included the <code>\n</code> character, which fakes pressing enter in the <code>&lt;input&gt;</code> element.</p>

<p>At this point, we only need to set up an expectation that the <code>repoform</code> element no longer exists on the page (as we&rsquo;re hiding it with <code>ng-if</code>). We can use the same method we did above to confirm it is no longer on the page:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'the input box should go away on submit'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'repo.name'</span><span class="p">)).</span><span class="nx">sendKeys</span><span class="p">(</span><span class="s1">'angular/angular.js\n'</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">ptor</span><span class="p">.</span><span class="nx">isElementPresent</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s1">'repoform'</span><span class="p">))).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<h3>Testing the Listing</h3>

<p>After we&rsquo;ve set up our tests that set up the <code>&lt;input&gt;</code> element, we can move on and test the functionality of our listing page. </p>

<p><img src="/images/protractor/listing.png" /></p>

<p>Since the rest of the tests that we&rsquo;ll write will take place in the listing page, we&rsquo;ll nest the rest of the tests here within their own <code>describe()</code> block. Using a separate block allows us to set another <code>beforeEach()</code> block where we&rsquo;ll set up the tests to run against the <code>angular/angular.js</code> github repository.</p>

<p>The describe block will simply act as a user coming to our homepage and typing in the input field and pressing enter. It might seem superfluous to set up our tests in the manner, but remember that the goal of end-to-end testing is to automate user interaction. </p>
<pre class="highlight javascript"><span class="nx">describe</span><span class="p">(</span><span class="s1">'listing page'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'repo.name'</span><span class="p">)).</span><span class="nx">sendKeys</span><span class="p">(</span><span class="s1">'angular/angular.js\n'</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="c1">// ...
</span>  <span class="c1">// our listing page tests will go here
</span><span class="p">});</span>
</pre>
<p>The listing page will have a number of elements that we&rsquo;ll iterate over using <code>ng-repeat</code>. Using the GitHub APi, we&rsquo;ll retrieve 30 issues by default. We can test that this page does in fact resolve to 30 issues. </p>

<p>We can target the <code>ng-repeat</code> element by using the <code>by.repeater()</code> helper. This helper looks at the <code>ng-repeat</code> directives on the page and finds the one that matches our expression. In this case, we&rsquo;re repeating using the Angular expression <code>d in data | orderBy:created_at:false</code>. We can target the repeater using:</p>
<pre class="highlight javascript"><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data | orderBy:created_at:false'</span><span class="p">)</span>
</pre>
<p>We have the option of being explicit with the filters (as we have done above) or leaving off the filters and being more generic:</p>
<pre class="highlight javascript"><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data'</span><span class="p">);</span>
</pre>
<p>Using the <code>by.repeater()</code> doesn&rsquo;t actually return us any elements; only a pointer to the method to fetch elements. If we try to set expectations against the object returned by the <code>by.repeater()</code> method, we&rsquo;ll simply get an ugly error. Protractor is set up in this way because elements are populated through promises, so we have to use the <code>element.all()</code> function to give us access to the resolved elements.</p>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data'</span><span class="p">));</span>
</pre>
<p>With our element targeted, we can simply ask for a count on the <code>element.all()</code> object and set an expectation that there will be 30 elements:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'should have 30 issues'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data'</span><span class="p">));</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">elems</span><span class="p">.</span><span class="nx">count</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<p>Great. Let&rsquo;s dive more deeply into these repeated elements and ensure that the avatar is shown for each of them. We can make a reasonable assumption that the each element is a repeat of every other element, so we&rsquo;ll set up a test that tests a single element. </p>

<p>In order to fetch the elements on the page, we&rsquo;ll start in the same manner using the <code>by.repeater()</code> method. The <code>element.all()</code> method returns an object containing several methods we can use to interact with the repeated listing elements. In this case, we&rsquo;ll simply use the <code>first()</code> method to find the first element in the list.</p>

<p>Since the list is not yet populated on the page, the <code>first()</code> method returns a promise that will be resolved with the first element on the page. </p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'includes a user gravatar per-element'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data'</span><span class="p">));</span>
  <span class="nx">elems</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elm</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// elm is the first element
</span>  <span class="p">});</span>
<span class="p">});</span>
</pre>
<p>Since we&rsquo;re interested in only a single child element, we&rsquo;ll use the <code>findElement()</code> method to fetch the <code>&lt;img&gt;</code> element. We can target this element by multiple methods. We&rsquo;ll use the <code>by.tagName()</code> method. As with the <code>first()</code> method, <code>findElement()</code> returns a promise for the very same reason. </p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'includes a user gravatar per-element'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data'</span><span class="p">));</span>
  <span class="nx">elems</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elm</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">elm</span><span class="p">.</span><span class="nx">findElement</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">tagName</span><span class="p">(</span><span class="s1">'img'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">img</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// img is the &lt;img&gt; element
</span>    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
<p>We&rsquo;re particularly interested in making sure the src attribute includes a Gravatar URL. We can dive even more deeply into the details of the element using various methods provided by the <code>element</code> object. In this case, we&rsquo;ll use the <code>getAttribute()</code> method to find the src attribute. As with the previous two methods, we&rsquo;ll need to set it up as a promise:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'includes a user gravatar per-element'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data'</span><span class="p">));</span>
  <span class="nx">elems</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elm</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">elm</span><span class="p">.</span><span class="nx">findElement</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">tagName</span><span class="p">(</span><span class="s1">'img'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">img</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">'src'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// src is the text source
</span>      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
<p>Now that we have the src attribute, we can set up an expectation that the source matches <code>gravatar.com</code>, as GitHub uses Gravatar:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'includes a user gravatar per-element'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">repeater</span><span class="p">(</span><span class="s1">'d in data'</span><span class="p">));</span>
  <span class="nx">elems</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elm</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">elm</span><span class="p">.</span><span class="nx">findElement</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">tagName</span><span class="p">(</span><span class="s1">'img'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">img</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">'src'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">src</span><span class="p">).</span><span class="nx">toMatch</span><span class="p">(</span><span class="sr">/gravatar\.com\/avatar/</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">})</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
<h3>Testing Routing</h3>

<p>The last piece of functionality we&rsquo;ll want to test is the page navigation. As expected, we&rsquo;ll set up our tests using actions on elements of the page. In this case, we&rsquo;ll target the <code>/about</code> link using CSS and click on the link.</p>

<p>The HTML looks like:</p>
<pre class="highlight html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;header&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-class=</span><span class="s">&quot;{'active': isCurrentPage('')}&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">id=</span><span class="s">&quot;homelink&quot;</span> <span class="na">ng-href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-class=</span><span class="s">&quot;{'active': isCurrentPage('about')}&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">id=</span><span class="s">'aboutlink'</span> <span class="na">ng-href=</span><span class="s">&quot;#/about&quot;</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">&quot;text-muted&quot;</span><span class="nt">&gt;</span>protractorer<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre>
<p>The <code>/about</code> link is the second element in the header.nav list. The quickest method to target the list is to use a CSS selector through the <code>by.css()</code> method. </p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'should navigate to the /about page when clicking'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'.header ul li:nth-child(2)'</span><span class="p">))</span>
<span class="p">});</span>
</pre>
<p>Now that we have the link, we can click on it to navigate to the new URL. Once we&rsquo;ve navigated to the <code>/about</code> page, we can test that the page content shows up, or we can test that the current route contains the <code>/about</code> path. Since we can reasonably expect the Angular router to work, we can assume the about page content will load if the browser&rsquo;s URL matches the about page. </p>

<p>Therefore, we&rsquo;ll simply test that the current URL includes <code>/about</code>. We can get hold of the current URL using the Protractor instance method <code>getCurrentUrl()</code>:</p>
<pre class="highlight javascript"><span class="nx">it</span><span class="p">(</span><span class="s1">'should navigate to the /about page when clicking'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'.header ul li:nth-child(2)'</span><span class="p">)).</span><span class="nx">click</span><span class="p">();</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">ptor</span><span class="p">.</span><span class="nx">getCurrentUrl</span><span class="p">()).</span><span class="nx">toMatch</span><span class="p">(</span><span class="sr">/\/about/</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<p>Finally, since we&rsquo;re testing the front end, we can also expect that the <code>active</code> class will be added to the link. </p>

<blockquote>
<p>The <code>active</code> class adds the color style on the button.</p>
</blockquote>

<p>We&rsquo;ll want to run the same action we did previously where we click on the <code>/about</code> link. Any time that we find ourselves duplicating test data, it&rsquo;s usually a good idea to nest the tests in their own describe block and move the duplication into the block. Let&rsquo;s go ahead and move our tests into the describe block:</p>
<pre class="highlight javascript"><span class="nx">describe</span><span class="p">(</span><span class="s1">'page navigation'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">link</span><span class="p">;</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">link</span> <span class="o">=</span> <span class="nx">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'.header ul li:nth-child(2)'</span><span class="p">));</span>
    <span class="nx">link</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should navigate to the /about page when clicking'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">ptor</span><span class="p">.</span><span class="nx">getCurrentUrl</span><span class="p">()).</span><span class="nx">toMatch</span><span class="p">(</span><span class="sr">/\/about/</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should add the active class when at /about'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// should have the active class
</span>  <span class="p">});</span>
<span class="p">});</span>
</pre>
<p>The final test tests whether the class list contains the string <code>active</code>:</p>
<pre class="highlight javascript"><span class="nx">expect</span><span class="p">(</span><span class="nx">link</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">toMatch</span><span class="p">(</span><span class="sr">/active/</span><span class="p">);</span>
</pre>
<h3>Want More?</h3>

<p>Protractor is a highly active project on GitHub and an incredibly powerful end-to-end testing framework. It will soon replace Karma as the official end-to-end test runner and become the official testing framework for Angular.</p>

<p>The testing source code is available at <a href="http://j.mp/1m4xdma">http://j.mp/1m4xdma</a>.</p>

<p>If you enjoyed this section, check out <a href="https://ng-book.com">ng-book.com</a> for more details. </p>

<p>Thanks, and happy testing!</p>


          <div class="container" id="signupApp" ng-cloak>
  <div id="topbar_signup_embed">
  Get the weekly email all focused on AngularJS. <b>Sign up below</b> to receive the weekly email and exclusive content.
  <form name="ngSignup" action="http://willcodeforfoo.us6.list-manage1.com/subscribe/post?u=86d6f14c7cc955128485e3b8e&amp;id=fa61364f13" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    
    <div class="row collapse">
      <div class="small-9 columns">
        <input ng-class="{error: ngSignup.email.$dirty && ngSignup.email.$invalid}" type="email" ng-minlength=3 ng-model="ngSignup.email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email address" required>
      </div>
      <div class="small-3 columns">
        <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" ng-disabled="ngSignup.$invalid" class="button postfix"></div>
      </div>
        <div class="small-12 columns error" ng-show="ngSignup.EMAIL.$dirty && ngSignup.EMAIL.$invalid">
          <small class="error" ng-show="ngSignup.EMAIL.$error.required">Your email is required.</small>
          <small class="error" ng-show="ngSignup.EMAIL.$error.minlength">Your email is required to be at least 3 characters</small>
          <small class="error" ng-show="ngSignup.EMAIL.$error.email">That is not a valid email. Please input a valid email.</small>
        </div>
      </div>
  </form>
  </div>
</div>

<script type="text/javascript">
  if (typeof(app) == 'undefined') {
    angular.module("signupApp", [])
    .controller("mailChimpValidation", ['$scope', function($scope) {}]);
    var ele = document.getElementById("signupApp");
    angular.element(ele, ['signupApp']);
  }
</script>
          <section id="sample_chapter" ng-app="ngBookApp">    <div class="content">      <h3 class="title">Download a free sample of the ng-book: The Complete Book on AngularJS</h3> <span class="image"><img src="http://www.ng-book.com/images/flatbook-ngbook-small.png" alt="book"></span><div class="desc">It's free, so just enter your email address and the PDF will be sent directly to your inbox.</div>    </div>    <div class="form" ng-init="signedup=false" ng-show="!signuped">      <form action="http://willcodeforfoo.us6.list-manage.com/subscribe/post?u=86d6f14c7cc955128485e3b8e&amp;id=7bbfaae868" method="post" id="mc-embedded-subscribe-form" name="ngBookSignup" class="validate ng-pristine ng-invalid ng-invalid-required" target="_blank" novalidate="">
<div class="mc-field-group">          <input type="email" ng-model="ngBookSignup.email" ng-class="{error: ngBookSignup.email.$dirty &amp;&amp; ngBookSignup.email.$invalid}" value="" name="EMAIL" placeholder="Your email address" class="required email ng-pristine ng-valid ng-valid-email ng-valid-minlength" id="mce-EMAIL" ng-minlength="3">        </div>        <div id="mce-responses" class="clear">          <div class="response" id="mce-error-response" style="display:none"></div>          <div class="response" id="mce-success-response" style="display:none"></div>        </div>        <div class="clear"><input type="submit" value="Send me a free chapter" name="subscribe" id="ngBookSignupSubmit" ng-disabled="ngBookSignup.$invalid" class="button postfix" ng-click="signedup=true" disabled="disabled"></div>      </form>      <div ng-show="signedup" class="ng-hide">      <p>Sweet! We are glad to hear you're interested in learning AngularJS. Enjoy the free chapter. We put a lot of work into building the book series, so we hope you like it!      Talk soon</p>      </div>      <div class="desc">        We won't ever send you spam! You can unsubscribe at any time.      </div>    </div>  </section>

          <footer>
            <ul class="actions">
              <li><a href="/articles"><span class="arrow">←</span> Back to articles</a></li>
              <li><a href="http://twitter.com/home/?status=Practical End-to-End Testing with Protractor - http://ng-newsletter.com/posts/practical-protractor.html via @ngnewsletter" target="_blank"><img src="/img/twitter-bird-blue-on-white.png" style="width: 56px; height: 26px;" />Share on twitter</a></li>
            </ul>
          </footer>

        </article>

        <section id="comments">
            <h2 class="gamma">Comments</h2>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ngnewsletter'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </section>

        

        <script type="text/javascript" src="/js/vendor/zepto.js"></script>
<script type="text/javascript" src="/js/vendor/foundation.min.js"></script>

<script src="/js/main.js"></script>

        </div>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28176211-3', 'ng-newsletter.com');
  ga('send', 'pageview');

</script>

<script type="text/javascript">
  var $mcGoal = {'settings':{'uuid':'86d6f14c7cc955128485e3b8e','dc':'us6'}};
  (function() {
     var sp = document.createElement('script'); sp.type = 'text/javascript'; sp.async = true; sp.defer = true;
    sp.src = ('https:' == document.location.protocol ? 'https://s3.amazonaws.com/downloads.mailchimp.com' : 'http://downloads.mailchimp.com') + '/js/goal.min.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sp, s);
  })(); 
</script>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://christopheviau.com/d3_tutorial/lib/d3.js"></script>
<title>D3-Inkscscape tutorial</title>
<style type="text/css">
img{
display: block;
border: 2px silver solid;
margin: 30px 30px 30px 0px;
text-align:center;
}
body {
margin:0px; padding:0px;
text-align:center;
font-family:"Verdana", Times, serif;
font-size:14px;
}
#container {
width:800px;
margin:0px auto;
text-align:justify;
line-height:140%;
padding:15px;
background-color:white;
}
</style>
</head>
<body>
<div id="container">
<h1>Scripting Inkscape with d3.js</h1>
<br />
<p>A UI designer often begin by sketching an idea, drawing a wireframe or a mockup and then implementing a functional prototype to test the interaction. Here is a typical workflow using Inkscape for illustration and d3.js to program animations and interactions on top of it. This is not a d3 nor Inkscape tutorial, but only a quick demonstration of how to integrate both tools in a complete design workflow.</p>

<h2>Sketch and wireframe in Inkscape</h2>
<p>I prefer to draw a wireframe on my sketchboard and then scan and import it in Inkscape. I then redraw the outline mostly with boxes. Here I used red lines to contrast with my drawing.
<img src="sketch_wireframe.png" />
<p>The next step is to set some meaningful ID's on the elements I will want to use in d3: right-click on the element > Object properties > enter an ID > click on the Set button (the Définir button in this screenshot). 
<img src="set_ids.png" height="300px"/>
<p>I enter values in number boxes to have precise positioning. But you will have to check Inkscape preferences > Tools > Bounding box to use, because if you don't the pixel width will interfere with your positioning. A better way to do it is to enter values directly in the XML editor: Edit > XML editor. 
<img src="xml_editor.png" />
<p>As with any WYSIWYG, it can be a little tricky to have Inkscape write the exact SVG markup you want. Here are some little tricks:</p>
<ul>
<li>Inkscape transformations (scale, rotation, matrix transform) will write a "transform" attribute in your SVG. I try not to use them because I prefer to manage clean "x" and "y" attributes on elements I want to animate with d3. And a child element of a transformed group can have relative values harder to grasp (negative values for example).
</li><li>I like to "copy/paste in place" boxes and "constrain-move" them to keep alignments and to keep the same SVG attributes.
</li><li>Changing gradients can introduce a lot of markup in your SVG code as Inkscape will keep track of all the gradients you tried. 
</li><li>I always remove some extra markup, in the XML editor or in a text editor, as invalid code is introduced by Inkscape in its default SVG format. I always use the <a href="http://validator.w3.org/check">online validator</a>.
</ul>

<h2>Adding interaction with d3.js</h2>
<p>The SVG file can now be loaded in d3. Don't forget to develop with a local web server or other mean of having your browser accept the security restriction on file loading.</p> 
<img src="wireframe_chrome.png" />
<p>Here is a live example. Click on the "Update button" to see the bars changing heights.</p>
<iframe marginwidth="0" marginheight="0" width="600" height="500" scrolling="no" src="http://bl.ocks.org/d/1266259/"></iframe>
<br /><br />
<p>Here is the source code that loads the file, retrieves some elements with meaningful ID's, and adds interaction (like the "Update" label converted to a button) and animation (like the updating bar chart). There is also a basic (and ugly) code I use for my own needs, generating a download link to export the SVG results. Be sure to right click the download link to Save as and to enter a filename with the SVG extension.</p>

<script src="https://gist.github.com/1266259.js?file=index.html"></script>

<h2>And back to Inkscape</h2>
<p>I can go back to Inkscape at any time by exporting the generated SVG with the Download link and continue to iterate on the design.</p>
<img src="back_to_inkscape.png" />

That's all. You will excuse my unelegant code, but I wanted to keep this to the bare minimum and getting this tutorial quickly out of the door, hoping it can inspire you to combine those two great tools. If you need help, not about SVG or Inkscape but about d3.js, you can find me and a lot of great developers on the very dynamic <a href="https://groups.google.com/forum/#!forum/d3-js">d3.js Google group</a>.

<br /><br /><b>Christophe Viau</b>
</div>

</body>
</html>
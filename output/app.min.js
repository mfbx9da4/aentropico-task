/*! blog 2014-02-04 */
function graph(a){var b=$("#graph"),c={top:20,right:20,bottom:30,left:50},d=b.width()-c.left-c.right,e=b.width()/2-c.top-c.bottom,f=(d3.time.format("%d-%b-%y").parse,d3.scale.linear().range([0,d])),g=d3.scale.linear().range([e,0]),h=d3.svg.axis().scale(f).orient("bottom"),i=d3.svg.axis().scale(g).orient("left"),j=d3.svg.line().x(function(a){return f(a.x)}).y(function(a){return g(a.y)}),k=d3.select("#graph").append("svg").attr("width",d+c.left+c.right).attr("height",e+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");d3.csv.parseRows(a,function(a,b){f.domain(d3.extent(b,function(a){return parseInt(a.x)})),g.domain(d3.extent(b,function(a){return parseInt(a.y)})),k.append("g").attr("class","x axis").attr("transform","translate(0,"+e+")").call(h),k.append("g").attr("class","y axis").call(i).append("text").attr("transform","rotate(-90)"),k.append("path").datum(b).attr("class","line").attr("d",j)})}var AentropicApp=angular.module("AentropicApp",["angularFileUpload"]);AentropicApp.controller("uploadController",["$scope","$http","$upload",function(a,b,c){a.formData={},a.onFileSelect=function(d){var e=$("#percent-complete");e.width("0%");var f=d[0];a.upload=c.upload({url:"/algorithms",method:"POST",data:{myObj:a.formData.url},file:f}).then(function(a){if(!a.data.success)throw a.data.message;b.get("/jobs/"+a.data.job_id).success(function(a){console.log(a),graph(dataset_text)})},null,function(a){e.width(parseInt(100*a.loaded/a.total)+"%")})}}]),AentropicApp.controller("aboutController",["$scope",function(){}]);